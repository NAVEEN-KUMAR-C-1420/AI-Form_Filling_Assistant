<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Form Assistant</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <!-- Header -->
    <header class="popup-header">
      <div class="logo">
        <img src="../icons/icon48.png" alt="Logo">
        <h1>Form Assistant</h1>
      </div>
      <span class="version">v1.0.0</span>
    </header>

    <!-- Auth Section (Login/Signup) -->
    <section id="auth-section" class="section hidden">
      <div class="auth-tabs">
        <button class="tab-btn active" data-tab="login">Login</button>
        <button class="tab-btn" data-tab="signup">Sign Up</button>
      </div>

      <!-- Login Form -->
      <form id="login-form" class="auth-form">
        <div class="form-group">
          <label for="login-email">Email</label>
          <input type="email" id="login-email" required placeholder="your@email.com">
        </div>
        <div class="form-group">
          <label for="login-password">Password</label>
          <input type="password" id="login-password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        </div>
        <button type="submit" class="btn btn-primary">Login</button>
        <div id="login-error" class="error-msg hidden"></div>
      </form>

      <!-- Signup Form -->
      <form id="signup-form" class="auth-form hidden">
        <div class="signup-header">
          <p class="signup-subtitle">Create your account to get started</p>
        </div>
        <div class="form-group">
          <label for="signup-name">Full Name <span class="required">*</span></label>
          <input type="text" id="signup-name" required placeholder="Enter your full name">
        </div>
        <div class="form-group">
          <label for="signup-email">Email <span class="required">*</span></label>
          <input type="email" id="signup-email" required placeholder="Enter your email">
        </div>
        <div class="form-group">
          <label for="signup-phone">Mobile Number</label>
          <input type="tel" id="signup-phone" placeholder="+91 9876543210">
        </div>
        <div class="form-group">
          <label for="signup-password">Password <span class="required">*</span></label>
          <input type="password" id="signup-password" required placeholder="Minimum 8 characters" minlength="8">
        </div>
        <div class="form-group">
          <label for="signup-confirm-password">Confirm Password <span class="required">*</span></label>
          <input type="password" id="signup-confirm-password" required placeholder="Re-enter password" minlength="8">
        </div>
        <button type="submit" class="btn btn-primary btn-signup">Create Account</button>
        <div id="signup-error" class="error-msg hidden"></div>
        <p class="signup-terms">By signing up, you agree to our Terms of Service and Privacy Policy</p>
      </form>
    </section>

    <!-- Main Section (Logged In) -->
    <section id="main-section" class="section hidden">
      <!-- User Info -->
      <div class="user-info">
        <div class="user-avatar">
          <span id="user-initials">RK</span>
        </div>
        <div class="user-details">
          <span id="user-name">Raj Kumar</span>
          <span id="user-email">raj@example.com</span>
        </div>
        <button id="logout-btn" class="btn-icon" title="Logout">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
          </svg>
        </button>
      </div>

      <!-- Website Status -->
      <div id="website-status" class="status-card">
        <div class="status-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
        </div>
        <div class="status-text">
          <span class="status-title">Website Status</span>
          <span id="status-message" class="status-msg">Checking...</span>
        </div>
      </div>

      <!-- DigiLocker Connection -->
      <div id="digilocker-section" class="digilocker-card">
        <div class="digilocker-header">
          <div class="digilocker-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
            </svg>
          </div>
          <div class="digilocker-info">
            <span class="digilocker-title">DigiLocker</span>
            <span id="digilocker-status" class="digilocker-status">Not Connected</span>
          </div>
        </div>
        <button id="digilocker-connect-btn" class="btn btn-digilocker">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
          </svg>
          Connect DigiLocker
        </button>
        <button id="digilocker-import-btn" class="btn btn-digilocker-import hidden">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
          </svg>
          Import Documents
        </button>
      </div>

      <!-- Profile Data Summary -->
      <div class="profile-summary">
        <h3>Your Saved Data</h3>
        <div id="profile-data-list" class="data-list">
          <div class="loading">Loading...</div>
        </div>
        <a href="#" id="manage-data-link" class="link">Manage your data</a>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <button id="detect-forms-btn" class="action-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14H6v-2h6v2zm4-4H6v-2h10v2zm0-4H6V7h10v2z"/>
          </svg>
          Detect Forms
        </button>
        <button id="upload-doc-btn" class="action-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
          </svg>
          Upload Document
        </button>
      </div>
    </section>

    <!-- DigiLocker Import Section -->
    <section id="digilocker-import-section" class="section hidden">
      <div class="section-header">
        <button id="back-from-digilocker" class="btn-back">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
          </svg>
        </button>
        <h2>DigiLocker Documents</h2>
      </div>

      <p class="digilocker-subtitle">Select documents to import from your DigiLocker account</p>

      <div id="digilocker-docs-list" class="digilocker-docs">
        <div class="loading">Loading documents...</div>
      </div>

      <button id="import-selected-btn" class="btn btn-primary" disabled>
        Import Selected (0)
      </button>
    </section>

    <!-- Document Upload Section -->
    <section id="upload-section" class="section hidden">
      <div class="section-header">
        <button id="back-from-upload" class="btn-back">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
          </svg>
        </button>
        <h2>Upload Document</h2>
      </div>

      <form id="upload-form">
        <div class="form-group">
          <label for="doc-type">Document Type</label>
          <select id="doc-type" required>
            <option value="">Select type...</option>
            <option value="aadhaar">Aadhaar Card</option>
            <option value="pan">PAN Card</option>
            <option value="voter_id">Voter ID</option>
            <option value="driving_license">Driving License</option>
            <option value="ration_card">Ration Card</option>
            <option value="community_certificate">Community Certificate</option>
            <option value="income_certificate">Income Certificate</option>
          </select>
        </div>

        <div class="upload-area" id="upload-area">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/>
          </svg>
          <p>Drop file here or click to upload</p>
          <span>Supported: JPG, PNG, PDF (max 10MB)</span>
          <input type="file" id="file-input" accept=".jpg,.jpeg,.png,.pdf,.tiff" hidden>
        </div>

        <div id="file-preview" class="file-preview hidden">
          <span id="file-name"></span>
          <button type="button" id="remove-file" class="btn-icon">√ó</button>
        </div>

        <button type="submit" class="btn btn-primary" id="upload-btn" disabled>
          Upload & Extract
        </button>
      </form>

      <div id="upload-progress" class="progress hidden">
        <div class="progress-bar"></div>
        <span class="progress-text">Processing...</span>
      </div>
    </section>

    <!-- Extraction Preview Section -->
    <section id="preview-section" class="section hidden">
      <div class="section-header">
        <button id="back-from-preview" class="btn-back">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
          </svg>
        </button>
        <h2>Review Extracted Data</h2>
      </div>

      <div class="extraction-info">
        <span id="doc-type-badge" class="badge">Aadhaar</span>
        <span id="confidence-badge" class="badge badge-success">95% Confidence</span>
      </div>

      <form id="preview-form">
        <div id="extracted-fields" class="extracted-fields">
          <!-- Fields will be populated dynamically -->
        </div>

        <div class="consent-box">
          <input type="checkbox" id="storage-consent" required>
          <label for="storage-consent">
            I confirm that I have reviewed the extracted data and consent to storing it securely.
          </label>
        </div>

        <div class="preview-actions">
          <button type="button" id="cancel-extraction" class="btn btn-secondary">Cancel</button>
          <button type="submit" class="btn btn-primary">Confirm & Save</button>
        </div>
      </form>
    </section>

    <!-- Manage Data Section -->
    <section id="manage-data-section" class="section hidden">
      <div class="section-header">
        <button id="back-from-manage" class="btn-back">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
          </svg>
        </button>
        <h2>Manage Your Data</h2>
      </div>

      <div id="manage-data-list" class="manage-data-list">
        <div class="loading">Loading...</div>
      </div>

      <div class="danger-zone">
        <h4>‚ö†Ô∏è Danger Zone</h4>
        <p>Permanently delete all your saved data. This action cannot be undone.</p>
        <button id="delete-all-data-btn" class="btn btn-danger">Delete All Data</button>
      </div>
    </section>

    <!-- Footer -->
    <footer class="popup-footer">
      <span>üîí Your data is encrypted and secure</span>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
